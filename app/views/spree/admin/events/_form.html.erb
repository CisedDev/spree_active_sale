<% if @event.try(:errors).present? %>
  <%= render :partial => 'spree/shared/error_messages', :locals => { :target => @event } %>
<% end %>

<%= form_for @event, :url => ( @event.new_record? ? admin_active_sale_events_url(@active_sale, @event) : admin_active_sale_event_url(@active_sale, @event) ) do |f| %>
  <fieldset data-hook="new_active_sale">

    <div class="clearfix">
      <div class="left" data-hook="admin_product_form_left">
        <%= f.field_container :name do %>
          <%= f.label :name, t(:name) %> <span class="required">*</span><br />
          <%= f.text_field :name, :class => 'title' %>
          <%= f.error_message_on :name %>
        <% end %>


        <%= f.field_container :description do %>
          <%= f.label :description, t(:description) %><br />
          <%= f.text_area :description, {:cols => 60, :rows => 4, :class => 'fullwidth'} %>
          <%= f.error_message_on :description %>
        <% end %>
      </div>

      <div class="right" data-hook="admin_product_form_right">
        <p>
          <%= f.label :eventable, t(:eventable) %><br />
          <%= f.error_message_on :eventable %>
          <%= f.select :eventable_type, ["Product", "Taxon"], :class => 'text' %>
        </p>

        <p>
          <%= f.label :permalink, t(:permalink) %><br />
          <%= f.error_message_on :permalink %>
          <%= f.text_field :permalink, :class => 'text' %>
        </p>

        <p>
          <%= f.label :start_date, t('spree.active_sale.event.active_record.start_date') %><br />
          <%= f.error_message_on :start_date %>
          <%= f.datetime_select :start_date, :class => 'datepicker' %>
        </p>

        <p>
          <%= f.label :end_date, t('spree.active_sale.event.active_record.end_date') %><br />
          <%= f.error_message_on :end_date %>
          <%= f.datetime_select :end_date, :class => 'datepicker' %>
        </p>

        <p>
          <%= f.label :is_active, t('spree.active_sale.event.active_record.is_active') %><br />
          <%= f.error_message_on :is_active %>
          <%= f.check_box :is_active %>
        </p>

        <p>
          <%= f.label :is_hidden, t('spree.active_sale.event.active_record.is_hidden') %><br />
          <%= f.error_message_on :is_hidden %>
          <%= f.check_box :is_hidden %>
        </p>

        <p>
          <%= f.label :is_permanent, t('spree.active_sale.event.active_record.is_permanent') %><br />
          <%= f.error_message_on :is_permanent %>
          <%= f.check_box :is_permanent %>
        </p>
      </div>
    </div>

    <p class="form-buttons" data-hook="admin_active_sale_form_buttons">
      <% if @event.new_record? %>
        <%= render :partial => 'spree/admin/shared/new_resource_links' %>
      <% else %>
        <%= render :partial => 'spree/admin/shared/edit_resource_links' %>
      <% end %>
    </p>
  </fieldset>
<% end %>
